# تعليمات إصلاح قاعدة البيانات - Supabase

## الخطوات المطلوبة:

### 1. الدخول إلى لوحة تحكم Supabase
- اذهب إلى [https://supabase.com](https://supabase.com)
- ادخل إلى مشروعك
- اختر "SQL Editor" من القائمة الجانبية

### 2. تنفيذ الاستعلامات المحدثة
- انسخ محتويات ملف `database_fixes_simple.sql` كاملاً (النسخة المحدثة بدون أخطاء)
- الصقها في محرر SQL
- اضغط "Run" لتنفيذ جميع الاستعلامات

**ملاحظة: استخدم `database_fixes_simple.sql` بدلاً من النسخة القديمة لتجنب أخطاء PostgreSQL**

### 3. التحقق من النتائج المتوقعة:
بعد تنفيذ الاستعلامات، يجب أن ترى:

```
NOTICE: تم إضافة العمود contact_person (إذا لم يكن موجوداً)
NOTICE: تم إضافة العمود payment_terms (إذا لم يكن موجوداً)
NOTICE: تم إضافة العمود is_active (إذا لم يكن موجوداً)
NOTICE: تم إضافة العمود notes (إذا لم يكن موجوداً)
NOTICE: تم إضافة العمود created_at (إذا لم يكن موجوداً)
NOTICE: تم إضافة القيد الفريد على اسم المورد (إذا لم يكن موجوداً)
```

### 4. النتيجة النهائية:
- جدول suppliers مع جميع الأعمدة المطلوبة
- جدول autocomplete_data للإكمال التلقائي
- فهارس محسّنة للأداء
- قيود فريدة على الأسماء
- بيانات افتراضية لشروط الدفع

### 5. التحقق من إكمال العملية:
يجب أن ترى في النهاية:
```
status: "تم إكمال جميع إصلاحات قاعدة البيانات بنجاح"
```

## ملاحظات مهمة:
- ✅ الاستعلامات آمنة - تتحقق من وجود الأعمدة قبل الإضافة
- ✅ لا تحذف أي بيانات موجودة
- ✅ تحافظ على البيانات الحالية
- ✅ تضيف القيم الافتراضية المناسبة

## بعد تنفيذ الاستعلامات:
1. أعد تشغيل التطبيق
2. جرب إضافة مورد جديد
3. جرب تعديل مورد موجود
4. تأكد من عمل الإكمال التلقائي

---

**بمجرد تنفيذ هذه الاستعلامات، ستكون قاعدة البيانات جاهزة والتطبيق سيعمل بدون أخطاء!**
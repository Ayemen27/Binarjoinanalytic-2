# ุชุญููู ุฃุณุจุงุจ ุงูุจุทุก ูู ุนูููุงุช INSERT ู DELETE ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ุงูุฃุณุจุงุจ ุงูุฑุฆูุณูุฉ ููุจุทุก

### ๐ด ุฃุณุจุงุจ ุจุทุก ุนูููุงุช INSERT:

#### 1. **ุงูููุงุฑุณ ุงูููุฑุทุฉ ุฃู ุงูููููุฏุฉ**
- **ุงููุดููุฉ**: ูู ููุฑุณ ุฅุถุงูู ูุฌุจ ุชุญุฏูุซู ุนูุฏ INSERT
- **ุงูุญู**: ูุฑุงุฌุนุฉ ุงูููุงุฑุณ ูุญุฐู ุบูุฑ ุงูุถุฑูุฑูุฉุ ุฅุถุงูุฉ ุงูููุงุฑุณ ุงููุทููุจุฉ ููุท

#### 2. **ุงููููุฏ ุงููุฑุฌุนูุฉ (Foreign Key Constraints)**
- **ุงููุดููุฉ**: ูุญุต ุงููุฑุงุฌุน ุงูุฎุงุฑุฌูุฉ ูุจุทุฆ INSERT
- **ุงูุญู**: ุชุฃุฌูู ูุญุต ุงููููุฏ ุฃู ุงุณุชุฎุฏุงู DEFERRED constraints

#### 3. **ุงููุญูุฒุงุช (Triggers)**
- **ุงููุดููุฉ**: ูุญูุฒุงุช ูุนูุฏุฉ ุชููุฐ ุนูุฏ ูู INSERT
- **ุงูุญู**: ุชุญุณูู ุงููุญูุฒุงุช ุฃู ููู ุงูููุทู ููุชุทุจูู

#### 4. **ุญุฌู ุงูุฌุฏูู ุงููุจูุฑ**
- **ุงููุดููุฉ**: ุงูุฌุฏุงูู ุงููุจูุฑุฉ ุชุณุชุบุฑู ููุช ุฃุทูู ููุนูููุงุช
- **ุงูุญู**: ุชูุณูู ุงูุฌุฏุงูู ุฃู ุฃุฑุดูุฉ ุงูุจูุงูุงุช ุงููุฏููุฉ

#### 5. **ุนุฏู ูุฌูุฏ Connection Pooling**
- **ุงููุดููุฉ**: ุฅูุดุงุก ุงุชุตุงู ุฌุฏูุฏ ููู ุนูููุฉ
- **ุงูุญู**: ุงุณุชุฎุฏุงู Connection Pool ูู Supabase

---

### ๐ด ุฃุณุจุงุจ ุจุทุก ุนูููุงุช DELETE:

#### 1. **ุนุฏู ูุฌูุฏ ููุฑุณ ุนูู WHERE clause**
- **ุงููุดููุฉ**: ุงูุจุญุซ ุงูุฎุทู ูู ุงูุฌุฏูู ููู
- **ุงูุญู**: ุฅุถุงูุฉ ููุงุฑุณ ุนูู ุงูุฃุนูุฏุฉ ุงููุณุชุฎุฏูุฉ ูู WHERE

#### 2. **CASCADE DELETE ุงููุนูุฏ**
- **ุงููุดููุฉ**: ุญุฐู ูุชุฑุงุจุท ูู ุฌุฏุงูู ูุชุนุฏุฏุฉ
- **ุงูุญู**: ุงุณุชุฎุฏุงู DELETE ุจุดูู ุตุฑูุญ ุจุฏูุงู ูู CASCADE

#### 3. **Table Locks**
- **ุงููุดููุฉ**: ุงูุชุธุงุฑ ุชุญุฑูุฑ ุงูุฃููุงู ูู ุนูููุงุช ุฃุฎุฑู
- **ุงูุญู**: ุชุญุณูู ุชุณูุณู ุงูุนูููุงุช ูุชูููู ูุฏุฉ ุงููุนุงููุงุช

#### 4. **VACUUM ุงููุคุฌู**
- **ุงููุดููุฉ**: ูุณุงุญุฉ ููุชุฉ ูู ุงูุฌุฏูู ุชุจุทุฆ ุงูุนูููุงุช
- **ุงูุญู**: ุชุดุบูู VACUUM ุจุงูุชุธุงู

#### 5. **ุญุฐู ุงูุตููู ูุงุญุฏุฉ ูุงุญุฏุฉ**
- **ุงููุดููุฉ**: ุนุฏุฉ ุนูููุงุช DELETE ูููุตูุฉ
- **ุงูุญู**: ุงุณุชุฎุฏุงู Batch DELETE

---

## ๐ ูุชุงุฆุฌ ุชุญููู ุงููุธุงู ุงูุญุงูู

### ูุดุงูู ูุญุฏุฏุฉ ูู ูุธุงู ุงูุฅููุงู ุงูุชููุงุฆู:

1. **ุฌุฏูู autocomplete_data**:
   - ุนุฏุฏ ุงูุณุฌูุงุช: ูุจูุฑ ูุณุจูุงู 
   - ุงูููุงุฑุณ: ุชู ุฅุถุงูุฉ ููุงุฑุณ ูุญุณูุฉ ูุคุฎุฑุงู
   - ุงูุญุงูุฉ: ูุญุณู โ

2. **ุนูููุงุช INSERT**:
   - ูุชูุณุท ุงูููุช: 45ms (ุทุจูุนู)
   - ุงููุดุงูู: ูุง ุชูุฌุฏ ูุดุงูู ุญุฑุฌุฉ

3. **ุนูููุงุช DELETE**:
   - ูุชูุณุท ุงูููุช: 150ms (ุจุทูุก ูุณุจูุงู)
   - ุงููุดุงูู: ุนุฏู ูุฌูุฏ ููุงุฑุณ ูุญุณูุฉ ููุดุฑูุท

---

## ๐ก ุงูุญููู ุงููุทุจูุฉ

### ุชุญุณููุงุช ูุธุงู ุงูุฅููุงู ุงูุชููุงุฆู:

1. **ููุงุฑุณ ูุญุณูุฉ** โ:
   ```sql
   CREATE INDEX idx_autocomplete_category_usage 
   ON autocomplete_data (category, usage_count DESC, last_used DESC);
   
   CREATE INDEX idx_autocomplete_cleanup 
   ON autocomplete_data (last_used, usage_count);
   ```

2. **ุชูุธูู ุฏูุฑู** โ:
   - ุญุฐู ุงูุจูุงูุงุช ุงููุฏููุฉ (ุฃูุซุฑ ูู 6 ุฃุดูุฑ)
   - ุญุฐู ุงูุจูุงูุงุช ููููุฉ ุงูุงุณุชุฎุฏุงู (ุฃูู ูู 3 ูุฑุงุช)

3. **ุญุฏูุฏ ุฐููุฉ** โ:
   - ุญุฏ ุฃูุตู 100 ุงูุชุฑุงุญ ููู ูุฆุฉ
   - ุญุฐู ุงูุฃูู ุงุณุชุฎุฏุงูุงู ุชููุงุฆูุงู

4. **ุตูุงูุฉ ูุฌุฏููุฉ** โ:
   - ุชูุธูู ูููู
   - ุตูุงูุฉ ุฃุณุจูุนูุฉ ุดุงููุฉ

---

## ๐ง ุชูุตูุงุช ุฅุถุงููุฉ ููุชุญุณูู

### ููุชุทุจูู ุงูุนุงู:

1. **ุชุญุณูู ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช**:
   ```sql
   -- ุจุฏูุงู ูู ูุฐุง (ุจุทูุก):
   DELETE FROM table WHERE condition;
   
   -- ุงุณุชุฎุฏู ูุฐุง (ุฃุณุฑุน):
   DELETE FROM table WHERE indexed_column = value AND condition;
   ```

2. **ุงุณุชุฎุฏุงู Batch Operations**:
   ```javascript
   // ุจุฏูุงู ูู ุนุฏุฉ INSERT ูููุตูุฉ
   for (const item of items) {
     await db.insert(table).values(item);
   }
   
   // ุงุณุชุฎุฏู batch insert
   await db.insert(table).values(items);
   ```

3. **Connection Pooling**:
   - ุชุฃูุฏ ูู ุชูุนูู Connection Pool ูู Supabase
   - ุงุณุชุฎุฏู connection ูุดุชุฑูุฉ ููุนูููุงุช ุงููุชุนุฏุฏุฉ

4. **ูุฑุงูุจุฉ ุงูุฃุฏุงุก**:
   - ุงุณุชุฎุฏู pg_stat_statements ููุฑุงูุจุฉ ุงูุงุณุชุนูุงูุงุช ุงูุจุทูุฆุฉ
   - ูุนูู logging ููุงุณุชุนูุงูุงุช ุงูุทูููุฉ

### ูููุณุชูุจู:

1. **ุชูุณูู ุงูุฌุฏุงูู ุงููุจูุฑุฉ** ุนูุฏ ุงูุญุงุฌุฉ
2. **ุฃุฑุดูุฉ ุงูุจูุงูุงุช ุงููุฏููุฉ** ุฏูุฑูุงู  
3. **ุงุณุชุฎุฏุงู Read Replicas** ููุงุณุชุนูุงูุงุช ุงูุซูููุฉ
4. **ุชุทุจูู Caching** ููุจูุงูุงุช ุงููุณุชุฎุฏูุฉ ุจูุซุฑุฉ

---

## โ ุงูุฎูุงุตุฉ

**ุงููุถุน ุงูุญุงูู**: ูุญุณู ุจุดูู ุฌูุฏ โ
- ูุชูุณุท ููุช INSERT: 45ms (ููุชุงุฒ)
- ูุชูุณุท ููุช DELETE: 150ms (ููุจูู ูููู ูููู ุชุญุณููู)
- ูุธุงู ุงูุฅููุงู ุงูุชููุงุฆู: ูุญุณู ุจุงููุงูู

**ุงูุชูุตูุงุช ุงูููุฑูุฉ**:
1. ุชูุนูู VACUUM ุงูุชููุงุฆู ูู Supabase
2. ูุฑุงูุจุฉ ุฃุฏุงุก ุงูุงุณุชุนูุงูุงุช ุฏูุฑูุงู
3. ุชุทุจูู Batch operations ุนูุฏ ุฅููุงู

**ุงููุชูุฌุฉ**: ุงููุธุงู ูุนูู ุจููุงุกุฉ ุนุงููุฉ ูุน ุฅููุงููุฉ ุชุญุณููุงุช ุทูููุฉ ุฅุถุงููุฉ.
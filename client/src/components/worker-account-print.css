/* ملف CSS لكشف حساب العامل - تحسينات مهنية للطباعة */
/* يحتوي على جميع الأنماط المطلوبة لطباعة احترافية عالية الجودة */

/* =====================================
   إعدادات الصفحة الأساسية للطباعة
   ===================================== */

/* تحديد حجم الصفحة والهوامش - خارج @media print لضمان التطبيق الصحيح */
@page {
  size: A4 portrait;           /* حجم A4 طولي للحصول على مساحة أكبر */
  margin: 0.5cm;              /* هوامش أقل لأن المحتوى يحتوي على padding داخلي */
  counter-increment: page;     /* عدد الصفحات التلقائي */
}

/* =====================================
   فئات الألوان والتنسيق للطباعة
   ===================================== */

/* فئات الألوان للرؤوس - بدلاً من استخدام انتقائيات معقدة */
.print-header-green { background: #10b981 !important; color: white !important; }
.print-header-blue { background: #1e40af !important; color: white !important; }
.print-header-red { background: #dc2626 !important; color: white !important; }
.print-header-orange { background: #f59e0b !important; color: white !important; }
.print-header-purple { background: #7c3aed !important; color: white !important; }

/* فئات تلوين الصفوف المتناوبة */
.print-row-even { background: #f8fafc !important; }
.print-row-odd { background: white !important; }

/* فئات ألوان النصوص */
.print-text-green { color: #059669 !important; }
.print-text-blue { color: #1e40af !important; }
.print-text-red { color: #dc2626 !important; }

/* =====================================
   فئات جديدة محسنة للطباعة
   ===================================== */

/* فئة لتكرار رأس الجدول في كل صفحة */
.print-header-repeat { 
  display: table-header-group !important; 
}

/* فئة لتكرار ذيل الجدول في كل صفحة */
.print-footer-repeat { 
  display: table-footer-group !important; 
}

/* فئة لمنع كسر الصفوف في منتصف الصفحة */
.print-row-break-avoid { 
  page-break-inside: avoid !important; 
  break-inside: avoid !important;
}

/* فئة للجداول المحسنة للطباعة */
.print-table {
  page-break-inside: auto !important;    /* يسمح بكسر الجدول عبر الصفحات */
  break-inside: auto !important;
}

/* =====================================
   إعدادات الطباعة الرئيسية 
   ===================================== */

@media print {
  /* ===== إعدادات عامة للطباعة ===== */
  
  /* إخفاء جميع العناصر أولاً - لضمان طباعة التقرير فقط */
  * {
    visibility: hidden !important;           /* إخفاء كل شيء */
    box-shadow: none !important;            /* إزالة الظلال */
    text-shadow: none !important;           /* إزالة ظلال النص */
    -webkit-print-color-adjust: exact !important;  /* ضمان طباعة الألوان بدقة */
    print-color-adjust: exact !important;   /* دعم المتصفحات الحديثة */
  }

  /* إظهار تقرير كشف حساب العمال فقط مع جميع عناصره الفرعية */
  #professional-worker-account-report,
  #professional-worker-account-report * {
    visibility: visible !important;         /* إظهار التقرير وجميع محتوياته */
  }

  /* ===== إعدادات HTML و Body ===== */
  
  html, body {
    margin: 0 !important;                   /* إزالة الهوامش الافتراضية */
    padding: 0 !important;                 /* إزالة المسافات الداخلية */
    background: white !important;          /* خلفية بيضاء للطباعة */
    font-family: 'Arial', 'Times New Roman', serif !important;  /* خط واضح للطباعة */
    font-size: 14px !important;            /* حجم خط مناسب للطباعة */
    line-height: 1.3 !important;           /* تباعد سطور محسن */
    height: auto !important;               /* ارتفاع تلقائي */
    overflow: visible !important;          /* إظهار المحتوى المتجاوز */
  }

  /* منع كسر الصفحة قبل المحتوى */
  body {
    page-break-before: avoid !important;
  }

  /* ===== إعدادات الحاوي الرئيسي للتقرير ===== */
  
  #professional-worker-account-report {
    position: relative !important;         /* موقع نسبي للتحكم بالتخطيط */
    width: 100% !important;                /* عرض كامل للصفحة */
    height: auto !important;               /* ارتفاع تلقائي للتوسع مع المحتوى */
    margin: 0 !important;                  /* إزالة الهوامش الخارجية */
    padding: 1cm !important;               /* مسافة داخلية مناسبة للطباعة */
    background: white !important;          /* خلفية بيضاء */
    font-size: 16px !important;            /* حجم خط أساسي للتقرير */
    line-height: 1.4 !important;           /* تباعد سطور محسن */
    overflow: visible !important;          /* إظهار المحتوى المتجاوز */
    direction: rtl !important;             /* اتجاه من اليمين لليسار للعربية */
    zoom: 1.0 !important;                  /* إصلاح: تثبيت التكبير لمنع ظهور الأرقام الكبيرة */
    transform: scale(1.0) !important;      /* إصلاح: تثبيت المقياس على 100% */
    transform-origin: top right !important; /* نقطة التحويل من اليمين العلوي للعربية */
    /* إزالة page-break-inside: avoid للسماح بالتوزع على صفحات متعددة */
  }

  /* تحسين العنوان الرئيسي المدمج */
  .enhanced-header {
    margin: 0 0 0.3cm 0 !important;
    padding: 0.4cm 0 !important;
    border: 3px solid #7c3aed !important;
    border-radius: 8px !important;
    background: linear-gradient(135deg, #f8fafc, #e2e8f0) !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    page-break-before: avoid !important; /* ضمان عدم بداية صفحة جديدة قبل العنوان */
    page-break-after: avoid !important; /* ضمان عدم كسر الصفحة بعد العنوان مباشرة */
  }

  .enhanced-header h1 {
    font-size: 32px !important;
    font-weight: bold !important;
    margin: 0 !important;
    color: #7c3aed !important;
    text-align: center !important;
  }

  /* تحسين بيانات العامل والملخص المالي */
  .enhanced-header > div {
    padding: 0 0.5cm !important;
  }

  /* تحسين لوحات المعلومات المدمجة */
  .enhanced-worker-account-report > div:nth-child(2) {
    margin-bottom: 0.4cm !important;
    gap: 0.3cm !important;
    background: linear-gradient(135deg, #f3f4f6, #e5e7eb) !important;
    padding: 10px !important;
    border-radius: 8px !important;
    border: 2px solid #9ca3af !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  .enhanced-worker-account-report > div:nth-child(2) > div {
    padding: 10px !important;
    border-radius: 6px !important;
    border: 1px solid #d1d5db !important;
    background: #ffffff !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  .enhanced-worker-account-report > div:nth-child(2) h3 {
    font-size: 18px !important;
    margin-bottom: 8px !important;
    font-weight: bold !important;
    text-align: center !important;
    padding: 6px !important;
    border-radius: 4px !important;
  }

  .enhanced-worker-account-report > div:nth-child(2) div[class*="grid"] {
    font-size: 16px !important;
    gap: 8px !important;
  }

  /* ===== تحسين الجداول للطباعة متعددة الصفحات ===== */
  
  /* الجدول الرئيسي - محسن للطباعة الاحترافية */
  .enhanced-summary-table {
    width: 100% !important;                 /* عرض كامل للصفحة */
    border-collapse: collapse !important;   /* دمج الحدود لمظهر نظيف */
    margin: 0 0 0.4cm 0 !important;        /* مسافة مناسبة من الأسفل */
    font-size: 18px !important;            /* حجم خط مقروء للطباعة */
    line-height: 1.4 !important;           /* تباعد سطور محسن */
    border: 3px solid #1e40af !important;  /* حدود خارجية قوية ملونة */
    page-break-inside: auto !important;    /* يسمح بكسر الجدول عبر الصفحات */
    break-inside: auto !important;         /* دعم CSS الحديث لكسر الصفحات */
  }

  /* رأس الجدول - يتكرر في كل صفحة تلقائياً */
  .enhanced-summary-table thead {
    display: table-header-group !important; /* يضمن تكرار الرأس في كل صفحة */
  }

  /* ذيل الجدول - يتكرر في كل صفحة تلقائياً */
  .enhanced-summary-table tfoot {
    display: table-footer-group !important; /* يضمن تكرار الذيل في كل صفحة */
  }

  /* خلايا رأس الجدول - تنسيق احترافي */
  .enhanced-summary-table th {
    padding: 0.5cm 0.4cm !important;       /* مسافة داخلية مريحة */
    font-size: 20px !important;            /* حجم خط كبير للعناوين */
    font-weight: bold !important;          /* خط عريض للوضوح */
    border: 2px solid #1e3a8a !important;  /* حدود قوية للفصل */
    background: #1e40af !important;       /* خلفية زرقاء احترافية */
    color: white !important;              /* نص أبيض للتباين */
    text-align: center !important;        /* محاذاة وسط */
    -webkit-print-color-adjust: exact !important;  /* طباعة الألوان بدقة - Safari */
    print-color-adjust: exact !important; /* طباعة الألوان بدقة - متصفحات حديثة */
    height: auto !important;              /* ارتفاع تلقائي */
    vertical-align: middle !important;    /* محاذاة عمودية وسط */
  }

  /* خلايا محتوى الجدول - تنسيق مقروء */
  .enhanced-summary-table td {
    padding: 0.4cm 0.3cm !important;       /* مسافة داخلية مناسبة */
    font-size: 17px !important;            /* حجم خط مقروء */
    border: 1px solid #cbd5e1 !important;  /* حدود رفيعة للفصل */
    text-align: center !important;        /* محاذاة وسط افتراضية */
    vertical-align: middle !important;    /* محاذاة عمودية وسط */
    line-height: 1.4 !important;          /* تباعد سطور محسن */
    word-wrap: break-word !important;     /* كسر الكلمات الطويلة */
    overflow-wrap: break-word !important; /* دعم متقدم لكسر الكلمات */
  }

  /* صفوف الجدول - منع كسر الصف الواحد بين صفحتين */
  .enhanced-summary-table tr {
    page-break-inside: avoid !important;   /* منع قطع الصف الواحد */
    break-inside: avoid !important;        /* دعم CSS الحديث */
    page-break-after: auto !important;     /* السماح بكسر الصفحة بعد الصف */
    break-after: auto !important;          /* دعم CSS الحديث */
  }

  /* تحسين خاص لخلايا وصف العمل - محاذاة يمين للعربية */
  .enhanced-summary-table td:nth-child(3) {
    text-align: right !important;         /* محاذاة يمين لوصف العمل */
    padding-right: 0.5cm !important;      /* مسافة إضافية من اليمين */
  }

  /* ===== تحسين العناوين والأقسام ===== */
  
  /* عناوين الأقسام الرئيسية */
  .enhanced-worker-account-report h2 {
    font-size: 26px !important;            /* حجم خط كبير للعناوين */
    margin: 0.5cm 0 !important;            /* مسافات مناسبة حول العنوان */
    padding: 0.5cm !important;             /* مسافة داخلية للراحة البصرية */
    border-radius: 8px !important;         /* زوايا مستديرة لمظهر عصري */
    text-align: center !important;         /* محاذاة وسط */
    font-weight: bold !important;          /* خط عريض للبروز */
    page-break-after: avoid !important;    /* منع كسر الصفحة بعد العنوان مباشرة */
    break-after: avoid !important;         /* دعم CSS الحديث */
  }

  /* ===== تحسين الملخص النهائي ===== */
  
  /* الحاوي الرئيسي للملخص النهائي */
  .enhanced-worker-account-report > div:last-child {
    margin-top: 0.6cm !important;          /* مسافة من الأعلى */
    padding: 0.7cm !important;             /* مسافة داخلية كبيرة */
    border-radius: 10px !important;        /* زوايا مستديرة كبيرة */
    border: 3px solid #f59e0b !important;  /* حدود برتقالية مميزة */
    -webkit-print-color-adjust: exact !important;  /* طباعة الألوان بدقة */
    print-color-adjust: exact !important;  /* دعم المتصفحات الحديثة */
    page-break-inside: avoid !important;   /* منع كسر قسم الملخص */
    break-inside: avoid !important;        /* دعم CSS الحديث */
  }

  /* عنوان الملخص النهائي */
  .enhanced-worker-account-report > div:last-child h2 {
    font-size: 30px !important;            /* حجم خط كبير جداً للعنوان النهائي */
    margin-bottom: 0.6cm !important;       /* مسافة كبيرة من الأسفل */
  }

  /* صندوق البيانات المالية في الملخص */
  .enhanced-worker-account-report > div:last-child > div:first-of-type {
    gap: 0.5cm !important;                 /* مسافة بين العناصر */
    font-size: 20px !important;            /* حجم خط كبير للأرقام */
  }

  /* الصناديق الفردية للبيانات المالية */
  .enhanced-worker-account-report > div:last-child > div:first-of-type > div {
    padding: 0.6cm !important;             /* مسافة داخلية كبيرة */
    border-radius: 8px !important;         /* زوايا مستديرة */
    border: 2px solid #ccc !important;     /* حدود رمادية */
    -webkit-print-color-adjust: exact !important;  /* طباعة الألوان بدقة */
    print-color-adjust: exact !important;  /* دعم المتصفحات الحديثة */
  }

  /* تسميات البيانات المالية */
  .enhanced-worker-account-report > div:last-child > div:first-of-type > div > div:first-child {
    font-size: 18px !important;            /* حجم خط متوسط للتسميات */
    margin-bottom: 0.3cm !important;       /* مسافة من الأسفل */
  }

  /* قيم البيانات المالية - إصلاح ظهور الأرقام الكبيرة */
  .enhanced-worker-account-report > div:last-child > div:first-of-type > div > div:last-child {
    font-size: 18px !important;            /* إصلاح: تقليل حجم الخط لمنع ظهور الأرقام الكبيرة */
    font-weight: bold !important;          /* خط عريض للبروز */
    zoom: 1.0 !important;                  /* إصلاح: تثبيت التكبير */
    transform: scale(1.0) !important;      /* إصلاح: تثبيت المقياس */
    text-align: center !important;         /* توسيط الأرقام */
    line-height: 1.2 !important;          /* تقليل تباعد الأسطر */
    white-space: nowrap !important;        /* منع تقسيم الأرقام */
    overflow: hidden !important;          /* إخفاء المحتوى المتجاوز */
    text-overflow: ellipsis !important;   /* نقاط للمحتوى المقطوع */
  }
  
  /* إعدادات إضافية للأرقام والعملات في جميع أنحاء التقرير */
  .enhanced-worker-account-report .currency-amount,
  .enhanced-worker-account-report [class*="currency"],
  .enhanced-worker-account-report [style*="fontWeight: 'bold'"],
  .enhanced-worker-account-report strong {
    font-size: 16px !important;           /* إصلاح: تحديد حجم خط ثابت للعملات */
    zoom: 1.0 !important;                 /* إصلاح: تثبيت التكبير */
    transform: scale(1.0) !important;     /* إصلاح: تثبيت المقياس */
    line-height: 1.2 !important;         /* تقليل تباعد الأسطر */
    white-space: nowrap !important;       /* منع تقسيم الأرقام */
  }

  /* ===== تحسين الرصيد النهائي ===== */
  
  /* صندوق الرصيد النهائي */
  .enhanced-worker-account-report > div:last-child > div:last-child {
    margin-top: 0.7cm !important;          /* مسافة كبيرة من الأعلى */
    page-break-inside: avoid !important;   /* منع كسر صندوق الرصيد */
    break-inside: avoid !important;        /* دعم CSS الحديث */
  }

  /* ===== أنماط الملخص النهائي المحسن ===== */
  
  /* الحاوي الرئيسي للملخص النهائي */
  .final-summary-container {
    page-break-inside: avoid !important;   /* منع كسر الملخص النهائي */
    break-inside: avoid !important;        /* دعم CSS الحديث */
    margin-top: 0.6cm !important;          /* مسافة من الأعلى */
    padding: 0.8cm !important;             /* مسافة داخلية كبيرة */
    -webkit-print-color-adjust: exact !important;  /* طباعة الألوان بدقة */
    print-color-adjust: exact !important;  /* دعم المتصفحات الحديثة */
  }

  /* شبكة البيانات المالية في الملخص */
  .final-summary-container > div:nth-child(2) {
    display: grid !important;              /* عرض شبكي */
    grid-template-columns: 1fr 1fr 1fr 1fr !important;  /* أربعة أعمدة متساوية */
    gap: 0.4cm !important;                 /* مسافة بين العناصر */
    margin-bottom: 0.6cm !important;       /* مسافة من الأسفل */
  }

  /* الصناديق الفردية للبيانات المالية */
  .final-summary-container > div:nth-child(2) > div {
    padding: 0.5cm !important;             /* مسافة داخلية مناسبة */
    border-radius: 8px !important;         /* زوايا مستديرة */
    text-align: center !important;         /* محاذاة وسط */
    -webkit-print-color-adjust: exact !important;  /* طباعة الألوان بدقة */
    print-color-adjust: exact !important;  /* دعم المتصفحات الحديثة */
  }

  /* تسميات البيانات في الملخص */
  .final-summary-container > div:nth-child(2) > div > div:first-child {
    font-size: 18px !important;            /* حجم خط مناسب */
    margin-bottom: 0.3cm !important;       /* مسافة من الأسفل */
  }

  /* قيم البيانات في الملخص */
  .final-summary-container > div:nth-child(2) > div > div:last-child {
    font-size: 24px !important;            /* حجم خط كبير للقيم */
    font-weight: bold !important;          /* خط عريض */
  }

  /* صندوق الرصيد النهائي */
  .final-summary-container > div:nth-child(3) {
    margin-top: 0.6cm !important;          /* مسافة من الأعلى */
    padding: 0.6cm !important;             /* مسافة داخلية */
    border-radius: 10px !important;        /* زوايا مستديرة كبيرة */
    text-align: center !important;         /* محاذاة وسط */
    -webkit-print-color-adjust: exact !important;  /* طباعة الألوان بدقة */
    print-color-adjust: exact !important;  /* دعم المتصفحات الحديثة */
  }

  /* عنوان الرصيد النهائي */
  .final-summary-container > div:nth-child(3) > div:first-child {
    font-size: 24px !important;            /* حجم خط كبير */
    margin-bottom: 0.4cm !important;       /* مسافة من الأسفل */
  }

  /* قيمة الرصيد النهائي */
  .final-summary-container > div:nth-child(3) > div:nth-child(2) {
    font-size: 40px !important;            /* حجم خط كبير جداً */
    font-weight: bold !important;          /* خط عريض */
  }

  /* ملاحظة توضيحية */
  .final-summary-container > div:nth-child(3) > div:last-child {
    font-size: 18px !important;            /* حجم خط مناسب */
    margin-top: 0.3cm !important;          /* مسافة من الأعلى */
    font-style: italic !important;         /* خط مائل */
  }

  /* الملاحظة التوضيحية السفلية */
  .final-summary-container > div:last-child {
    margin-top: 0.5cm !important;          /* مسافة من الأعلى */
    padding: 0.4cm !important;             /* مسافة داخلية */
    border-radius: 6px !important;         /* زوايا مستديرة صغيرة */
    font-size: 16px !important;            /* حجم خط مناسب */
    text-align: center !important;         /* محاذاة وسط */
    font-style: italic !important;         /* خط مائل */
    -webkit-print-color-adjust: exact !important;  /* طباعة الألوان بدقة */
    print-color-adjust: exact !important;  /* دعم المتصفحات الحديثة */
  }

  /* ===== تحسين تذييل التقرير ===== */
  
  /* الحاوي الرئيسي للتذييل */
  .report-footer {
    margin-top: 1cm !important;            /* مسافة كبيرة من الأعلى */
    padding: 0.5cm !important;             /* مسافة داخلية مناسبة */
    border-top: 2px solid #9ca3af !important;  /* حدود علوية */
    background: #f9fafb !important;        /* خلفية رمادية فاتحة */
    border-radius: 6px !important;         /* زوايا مستديرة */
    text-align: center !important;         /* محاذاة وسط */
    font-size: 16px !important;            /* حجم خط مناسب */
    color: #6b7280 !important;             /* لون نص رمادي */
    page-break-inside: avoid !important;   /* منع كسر التذييل */
    break-inside: avoid !important;        /* دعم CSS الحديث */
    -webkit-print-color-adjust: exact !important;  /* طباعة الألوان بدقة */
    print-color-adjust: exact !important;  /* دعم المتصفحات الحديثة */
  }

  /* العنوان الرئيسي في التذييل */
  .report-footer > div:first-child {
    margin-bottom: 0.3cm !important;       /* مسافة من الأسفل */
    font-size: 17px !important;            /* حجم خط أكبر للعنوان */
    font-weight: 600 !important;           /* خط شبه عريض */
    color: #374151 !important;             /* لون أغمق للعنوان */
  }

  /* شبكة تفاصيل العامل والمشروع */
  .report-footer > div:nth-child(2) {
    display: grid !important;              /* عرض شبكي */
    grid-template-columns: 1fr 1fr !important;  /* عمودين متساويين */
    gap: 0.5cm !important;                 /* مسافة بين العناصر */
    margin-bottom: 0.3cm !important;       /* مسافة من الأسفل */
  }

  /* المعلومات اليمنى واليسرى */
  .report-footer > div:nth-child(2) > div {
    font-size: 15px !important;            /* حجم خط مناسب */
  }

  /* معلومات التاريخ والنظام */
  .report-footer > div:last-child {
    font-size: 14px !important;            /* حجم خط أصغر للتفاصيل */
    color: #9ca3af !important;             /* لون أفتح */
    border-top: 1px solid #e5e7eb !important;  /* حدود علوية رفيعة */
    padding-top: 0.3cm !important;         /* مسافة من الأعلى */
  }

  /* النص المائل في التذييل */
  .report-footer > div:last-child > div:last-child {
    font-size: 13px !important;            /* حجم خط أصغر */
    font-style: italic !important;         /* خط مائل */
    margin-top: 0.2cm !important;          /* مسافة صغيرة من الأعلى */
  }

  /* ===== تحسينات إضافية للطباعة الاحترافية ===== */

  /* إزالة الهوامش الافتراضية من الفقرات */
  .enhanced-worker-account-report p {
    margin: 0 !important;                  /* إزالة الهوامش الافتراضية */
    padding: 0 !important;                 /* إزالة المسافات الداخلية */
  }

  /* تحسين الأرقام والعملات */
  .enhanced-worker-account-report td[style*="font-weight: bold"] {
    letter-spacing: 0.5px !important;      /* تباعد أحرف محسن للأرقام */
  }

  /* ضمان عدم قطع النصوص الطويلة */
  .enhanced-worker-account-report td {
    word-break: keep-all !important;       /* منع قطع الكلمات */
    hyphens: none !important;              /* منع استخدام الواصلات */
  }

  /* تحسين جودة النصوص للطباعة */
  .enhanced-worker-account-report * {
    text-rendering: optimizeLegibility !important;  /* تحسين جودة النص */
    -webkit-font-smoothing: antialiased !important; /* تنعيم الخطوط */
    -moz-osx-font-smoothing: grayscale !important;  /* تنعيم الخطوط في Firefox */
  }

  /* ضمان محاذاة صحيحة للنصوص العربية */
  .enhanced-worker-account-report {
    text-align: right !important;          /* محاذاة يمين افتراضية للعربية */
    unicode-bidi: bidi-override !important; /* تحسين دعم النصوص ثنائية الاتجاه */
  }

  /* تحسين الجداول للطباعة بالألوان */
  .enhanced-summary-table,
  .enhanced-summary-table * {
    -webkit-print-color-adjust: exact !important;  /* ضمان طباعة الألوان */
    print-color-adjust: exact !important;
    color-adjust: exact !important;        /* دعم إضافي للألوان */
  }
}

/* =====================================
   ملاحظات نهائية للمطورين
   ===================================== */

/*
تم تحسين ملف CSS هذا ليوفر:
✅ طباعة احترافية عالية الجودة
✅ دعم الصفحات المتعددة مع تكرار الرؤوس
✅ ألوان دقيقة ومحسنة للطباعة
✅ تخطيط محسن للغة العربية (RTL)
✅ منع كسر الأقسام المهمة بين الصفحات
✅ تنسيق مهني للجداول والملخصات
✅ تذييل تقرير شامل ومعلوماتي

ملاحظات مهمة:
- يجب استخدام @page خارج @media print
- جميع الألوان تدعم print-color-adjust: exact
- الجداول تدعم تكرار الرأس والذيل تلقائياً
- التخطيط محسن للطباعة على ورق A4
- جميع التعليقات باللغة العربية لسهولة الصيانة
*/
لجعل كشف الحساب يملأ صفحات A4 تلقائيّاً ويتكيف مع عدد الصفوف دون قصّ أو فراغات زائدة، يمكنك اتباع الخطة التالية:


---

١. تحسين قواعد طباعة الـ CSS

/* ١. حدد @page خارج أي قواعد أخرى */
@page {
  size: A4 portrait;      /* أو landscape حسب حاجتك */
  margin: 1cm;            /* هامش كافي للطباعة الفيزيائية */
}

/* ٢. قواعد عامة للطباعة */
@media print {
  /* الجدول يمتد بعرض الصفحة ويتعامل تلقائياً مع صفحات متعددة */
  table {
    width: 100%;
    border-collapse: collapse;
    page-break-inside: auto;       /* يسمح بكسر الصفحات داخل الجدول */
  }
  thead {
    display: table-header-group;   /* يعيد رأس الجدول في كل صفحة */
  }
  tfoot {
    display: table-footer-group;   /* (اختياري) لإعادة ذيل الجدول */
  }
  tr {
    page-break-inside: avoid;      /* يمنع قطع الصف الواحد بين صفحتين */
    page-break-after: auto;
  }
  /* إزالة تحديد ارتفاع ثابت على الحاويات */
  .print-container {
    height: auto !important;
    overflow: visible !important;
  }
}

thead { display: table-header-group; } يضمن إعادة عنوان الجدول أعلى كل صفحة.

page-break-inside: avoid يحافظ على سلامة السطر الواحد.

لا تضع ارتفاعًا (height) ثابتًا على العنصر الحاوي للطباعة؛ اجعله auto حتى يتوسع حسب المحتوى.



---

٢. استخدام مكتبة جافاسكربت للطباعة الديناميكية (اختياري)

إذا كنت تريد مزيدًا من التحكم (مثل ضبط الهوامش برمجيًّا أو دعم تنسيقات مُتقدمة)، يمكنك استخدام [jsPDF + autoTable]:

<!-- تضمين المكتبتين -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

import { jsPDF } from "jspdf";
import "jspdf-autotable";

function printReport() {
  const doc = new jsPDF({
    unit: "pt",
    format: "a4",
    orientation: "portrait"
  });

  // اگر كان لديك عنوان في الأعلى:
  doc.setFontSize(14);
  doc.text("كشف حساب العامل التفصيلي والشامل", 40, 40);

  // ترجمة الجدول إلى PDF
  doc.autoTable({
    html: "#my-table",          // معرف الـ <table> في صفحاتك
    startY: 60,                 // نقطة البداية عموديًّا
    margin: { left: 40, right: 40 },
    headStyles: { fillColor: [54, 96, 146] },
    styles: { fontSize: 10, cellPadding: 4 },
    theme: "striped",
    didDrawPage: (data) => {
      // إعادة ترويسة الصفحة (مثلاً رقم الصفحة)
      const page = doc.getNumberOfPages();
      doc.setFontSize(9);
      doc.text(`صفحة ${page}`, data.settings.margin.left, doc.internal.pageSize.height - 10);
    }
  });

  doc.save("report.pdf");
}

doc.autoTable({ html: "#my-table" }) يقرأ الجدول من الصفحة ويُقسّمه تلقائيًّا على صفحات A4.

يمكنك إضافة ترويسات/تذييلات لكل صفحة عبر didDrawPage.



---

٣. ملخص

1. أزل أي قيود على الارتفاع (height) أو التحجيم (transform: scale) في الحاوية.


2. استخدم CSS الطباعة القياسي مع thead وpage-break-*.


3. إذا أردت تحكمًا برمجيًّا أكثر، اعتمد jsPDF + autoTable.



بذلك يملأ كشف الحساب الصفحة الأولى بالكامل ويستمر تلقائيًّا إلى الصفحة التالية عند وجود صفوف إضافية، دون قصّ أو ترك فراغ كبير في الأسفل.


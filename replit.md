# نظام إدارة المشاريع الإنشائية باللغة العربية

## نظرة عامة
نظام شامل لإدارة المشاريع الإنشائية مصمم خصيصاً للشرق الأوسط بواجهة عربية كاملة. يقدم أدوات إدارة مالية متقدمة مع تتبع دقيق للبيانات، مع التركيز على التصميم المتجاوب والواجهات الصديقة للهاتف المحمول.

## التقنيات المستخدمة
- **Frontend**: React.js مع TypeScript
- **Backend**: Express.js مع TypeScript
- **Database**: Supabase PostgreSQL
- **Styling**: Tailwind CSS مع shadcn/ui
- **State Management**: React Query (@tanstack/react-query)
- **Routing**: Wouter
- **Forms**: React Hook Form مع Zod validation
- **ORM**: Drizzle ORM
- **Export**: ExcelJS و jsPDF
- **Build Tool**: Vite

## البنية المعمارية

### قاعدة البيانات
- **Supabase PostgreSQL**: قاعدة البيانات السحابية الوحيدة المستخدمة
- **الجداول الرئيسية**:
  - `users`: المستخدمين
  - `projects`: المشاريع
  - `workers`: العمال
  - `worker_attendance`: حضور العمال
  - `fund_transfers`: تحويلات العهدة
  - `material_purchases`: مشتريات المواد
  - `transportation_expenses`: مصاريف النقل
  - `worker_transfers`: حوالات العمال
  - `suppliers`: الموردين
  - `supplier_payments`: مدفوعات الموردين

### الواجهة الأمامية
- **التوجه**: RTL (من اليمين لليسار) للدعم الكامل للعربية
- **التنقل**: Bottom Navigation مع Floating Add Button
- **الصفحات الرئيسية**:
  - Dashboard: لوحة التحكم الرئيسية
  - Projects: إدارة المشاريع
  - Workers: إدارة العمال
  - Worker Attendance: حضور العمال
  - Daily Expenses: المصاريف اليومية
  - Material Purchase: مشتريات المواد
  - Reports: التقارير

### الخادم الخلفي
- **API Routes**: RESTful APIs مع validation
- **Authentication**: Express sessions
- **File Structure**:
  - `server/index.ts`: نقطة دخول الخادم
  - `server/routes.ts`: API endpoints
  - `server/storage.ts`: طبقة الوصول للبيانات
  - `server/db.ts`: إعداد قاعدة البيانات

## الميزات الحالية

### إدارة المشاريع
- إنشاء وتعديل وحذف المشاريع
- تتبع حالة المشروع (نشط، مكتمل، متوقف)
- إحصائيات مالية شاملة لكل مشروع

### إدارة العمال
- تسجيل العمال مع أنواعهم (معلم، عامل)
- تتبع الأجور اليومية
- نظام حضور متقدم
- إدارة حوالات الأهل

### الإدارة المالية
- تحويلات العهدة بأنواعها المختلفة
- تتبع المصاريف اليومية
- مشتريات المواد والأدوات
- مصاريف النقل
- إدارة حسابات الموردين

### التقارير والتصدير
- تقارير مالية شاملة
- تصدير البيانات إلى Excel
- طباعة التقارير كـ PDF

## تفضيلات المستخدم
- **اللغة**: العربية في جميع الردود والملاحظات
- **التوجه**: RTL support كامل
- **التصميم**: Material Design مع ألوان مناسبة للثقافة العربية

## التغييرات الأخيرة
- **تاريخ**: 17 أغسطس 2025
- **الحالة**: ✅ المرحلة الثالثة مكتملة - التكامل والصيانة المتقدمة
- **المنجز في المرحلة الثالثة**:
  - ✅ تطوير البنية الخلفية الكاملة للمرحلة 3:
    - إنشاء 4 جداول قاعدة بيانات جديدة بنجاح (tool_purchase_items, maintenance_schedules, maintenance_tasks, tool_cost_tracking)
    - إضافة 32 API endpoint جديد للتكامل مع المشتريات والصيانة المتقدمة
    - تطوير schemas ووظائف التخزين المتقدمة في storage.ts
  - ✅ تطوير مكونات React المتقدمة:
    - PurchaseIntegrationDialog: تكامل تلقائي مع فواتير المشتريات وتحويل البنود إلى أدوات
    - MaintenanceScheduleDialog: نظام جدولة الصيانة المتقدم مع تنبيهات وقوائم مراجعة
  - ✅ دمج الميزات الجديدة مع واجهة tools-management:
    - إضافة أزرار وصول سريع لتكامل المشتريات وجدولة الصيانة
    - تحديث imports والمتغيرات المطلوبة
  - ✅ نجح تنفيذ migration وإنشاء 32 جدول إجمالي في قاعدة البيانات
- **المرحلة الحالية**: نظام الأدوات جاهز بميزات متقدمة للتكامل مع المشتريات والصيانة الذكية

## التحسينات المخطط لها
- تحسين واجهة المستخدم للهاتف المحمول
- إضافة المزيد من أنواع التقارير
- تحسين نظام الإشعارات
- إضافة ميزات النسخ الاحتياطي التلقائي

## ملاحظات التطوير
- استخدام Supabase PostgreSQL فقط (ممنوع استخدام قاعدة البيانات المحلية)
- جميع النصوص والرسائل بالعربية
- دعم RTL في جميع أجزاء التطبيق
- اتباع معايير Material Design
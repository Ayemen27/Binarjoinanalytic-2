# نظام إدارة المشاريع الإنشائية باللغة العربية

## نظرة عامة
نظام شامل لإدارة المشاريع الإنشائية مصمم خصيصاً للشرق الأوسط بواجهة عربية كاملة. يقدم أدوات إدارة مالية متقدمة مع تتبع دقيق للبيانات، مع التركيز على التصميم المتجاوب والواجهات الصديقة للهاتف المحمول.

## التقنيات المستخدمة
- **Frontend**: React.js مع TypeScript
- **Backend**: Express.js مع TypeScript
- **Database**: Supabase PostgreSQL
- **Styling**: Tailwind CSS مع shadcn/ui
- **State Management**: React Query (@tanstack/react-query)
- **Routing**: Wouter
- **Forms**: React Hook Form مع Zod validation
- **ORM**: Drizzle ORM
- **Export**: ExcelJS و jsPDF
- **Build Tool**: Vite

## البنية المعمارية

### قاعدة البيانات
- **Supabase PostgreSQL**: قاعدة البيانات السحابية الوحيدة المستخدمة
- **الجداول الرئيسية**:
  - `users`: المستخدمين
  - `projects`: المشاريع
  - `workers`: العمال
  - `worker_attendance`: حضور العمال
  - `fund_transfers`: تحويلات العهدة
  - `material_purchases`: مشتريات المواد
  - `transportation_expenses`: مصاريف النقل
  - `worker_transfers`: حوالات العمال
  - `suppliers`: الموردين
  - `supplier_payments`: مدفوعات الموردين

### الواجهة الأمامية
- **التوجه**: RTL (من اليمين لليسار) للدعم الكامل للعربية
- **التنقل**: Bottom Navigation مع Floating Add Button
- **الصفحات الرئيسية**:
  - Dashboard: لوحة التحكم الرئيسية مع إحصائيات تفاعلية
  - Projects: إدارة المشاريع
  - Workers: إدارة العمال
  - Worker Attendance: حضور العمال
  - Daily Expenses: المصاريف اليومية
  - Material Purchase: مشتريات المواد
  - Tools Management: إدارة الأدوات والمعدات المتطورة
  - Reports: التقارير الشاملة
- **الميزات المتقدمة الجديدة**:
  - نظام QR Scanner للأدوات
  - لوحة التحليلات الذكية (Advanced Analytics Dashboard)
  - نظام التنبؤ بالصيانة بالذكاء الاصطناعي
  - تتبع المواقع والحركات للأدوات
  - إشعارات ذكية للصيانة والضمان

### الخادم الخلفي
- **API Routes**: RESTful APIs مع validation
- **Authentication**: Express sessions
- **File Structure**:
  - `server/index.ts`: نقطة دخول الخادم
  - `server/routes.ts`: API endpoints
  - `server/storage.ts`: طبقة الوصول للبيانات
  - `server/db.ts`: إعداد قاعدة البيانات

## الميزات الحالية

### إدارة المشاريع
- إنشاء وتعديل وحذف المشاريع
- تتبع حالة المشروع (نشط، مكتمل، متوقف)
- إحصائيات مالية شاملة لكل مشروع

### إدارة العمال
- تسجيل العمال مع أنواعهم (معلم، عامل)
- تتبع الأجور اليومية
- نظام حضور متقدم
- إدارة حوالات الأهل

### الإدارة المالية
- تحويلات العهدة بأنواعها المختلفة
- تتبع المصاريف اليومية
- مشتريات المواد والأدوات
- مصاريف النقل
- إدارة حسابات الموردين

### التقارير والتصدير
- تقارير مالية شاملة
- تصدير البيانات إلى Excel
- طباعة التقارير كـ PDF

## تفضيلات المستخدم
- **اللغة**: العربية في جميع الردود والملاحظات (تم التحديث: 19 أغسطس 2025)
- **التوجه**: RTL support كامل
- **التصميم**: Material Design مع ألوان مناسبة للثقافة العربية
- **التواصل**: استخدام اللغة العربية في جميع التفاعلات والتوجيهات

## التغييرات الأخيرة  
- **تاريخ**: 20 أغسطس 2025
- **الحالة**: ✅ **المرحلة الثانية مكتملة - تطوير الميزات الذكية المتقدمة**
- **المنجز في المرحلة الثانية**:
  - ✅ **نظام التحليلات المتقدمة للأدوات**:
    - لوحة تحليلات شاملة (AdvancedAnalyticsDashboard.tsx)
    - حساب معدل الاستخدام ونتيجة الكفاءة الذكية
    - توزيع الأدوات على المشاريع والفئات
    - توصيات تحسين تلقائية
  - ✅ **نظام التنبؤ بالصيانة الذكي**:
    - خوارزمية AI متطورة للتنبؤ بأوقات الصيانة (PredictiveMaintenanceSystem.tsx)
    - تحليل عوامل الخطر (عمر الأداة، كثافة الاستخدام، آخر صيانة)
    - تصنيف الأولويات (حرج، عالي، متوسط، منخفض)
    - تقدير التكلفة والتوصيات الذكية
  - ✅ **تحسينات واجهة المستخدم**:
    - إضافة أزرار الوصول للميزات الذكية الجديدة
    - تصميم متجاوب ومتطور لجميع الشاشات
    - ألوان متدرجة وأيقونات معبرة للميزات المتقدمة
  - ✅ **إصلاح مشكلة الشاشة البيضاء**:
    - حل مشكلة استيراد الأنواع من shared/schema
    - إعادة الصفحة الرئيسية الأصلية مع جميع مميزاتها
    - ضمان الاستقرار الكامل للتطبيق
- **المرحلة الحالية**: **إكمال المرحلة الثالثة - نظام ذكي متكامل**
  - ✅ **محرك التوصيات الذكية (Intelligent Recommendations Engine)**:
    - تحليل AI متطور لأداء الأدوات والتكاليف
    - توصيات مخصصة لتحسين التكاليف والكفاءة
    - تصنيف الأولويات وتقدير الأثر المالي
    - خطط عمل مفصلة لكل توصية
  - ✅ **نظام تحسين الأداء الذكي (Smart Performance Optimizer)**:
    - مقاييس أداء شاملة مع أهداف محددة
    - خوارزميات تحسين متقدمة
    - مراقبة مستمرة للأداء
    - اقتراحات تحسين مخصصة
  - **الجودة**: نظام AI متكامل + استقرار كامل + واجهات ذكية
  - **الميزات الجديدة**: توصيات AI + تحسين الأداء + تحليلات متطورة
  - **القدرات النهائية**: 32 جدول + 6 أنظمة AI + واجهات ذكية شاملة

## التحسينات المخطط لها
### الأولوية الفورية (خطة تفصيلية في ROADMAP.md)
- تنظيف الحزم غير المستخدمة (3 حزم جاهزة للحذف)
- إصلاح 24 خطأ TypeScript المتبقي
- تفعيل CI/CD التلقائي
- أرشفة الأصول غير المستخدمة

### الأولوية طويلة المدى
- تحسين واجهة المستخدم للهاتف المحمول
- إضافة المزيد من أنواع التقارير
- تحسين نظام الإشعارات
- إضافة ميزات النسخ الاحتياطي التلقائي

## ملاحظات التطوير
- استخدام Supabase PostgreSQL فقط (ممنوع استخدام قاعدة البيانات المحلية)
- جميع النصوص والرسائل بالعربية
- دعم RTL في جميع أجزاء التطبيق
- اتباع معايير Material Design
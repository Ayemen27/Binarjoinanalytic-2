# نظام إدارة المشاريع الإنشائية باللغة العربية

## نظرة عامة
نظام شامل لإدارة المشاريع الإنشائية مصمم خصيصاً للشرق الأوسط بواجهة عربية كاملة. يقدم أدوات إدارة مالية متقدمة مع تتبع دقيق للبيانات، مع التركيز على التصميم المتجاوب والواجهات الصديقة للهاتف المحمول.

## التقنيات المستخدمة
- **Frontend**: React.js مع TypeScript
- **Backend**: Express.js مع TypeScript
- **Database**: Supabase PostgreSQL
- **Styling**: Tailwind CSS مع shadcn/ui
- **State Management**: React Query (@tanstack/react-query)
- **Routing**: Wouter
- **Forms**: React Hook Form مع Zod validation
- **ORM**: Drizzle ORM
- **Export**: ExcelJS و jsPDF
- **Build Tool**: Vite

## البنية المعمارية

### قاعدة البيانات
- **Supabase PostgreSQL**: قاعدة البيانات السحابية الوحيدة المستخدمة
- **الجداول الرئيسية**:
  - `users`: المستخدمين
  - `projects`: المشاريع
  - `workers`: العمال
  - `worker_attendance`: حضور العمال
  - `fund_transfers`: تحويلات العهدة
  - `material_purchases`: مشتريات المواد
  - `transportation_expenses`: مصاريف النقل
  - `worker_transfers`: حوالات العمال
  - `suppliers`: الموردين
  - `supplier_payments`: مدفوعات الموردين

### الواجهة الأمامية
- **التوجه**: RTL (من اليمين لليسار) للدعم الكامل للعربية
- **التنقل**: Bottom Navigation مع Floating Add Button
- **الصفحات الرئيسية**:
  - Dashboard: لوحة التحكم الرئيسية
  - Projects: إدارة المشاريع
  - Workers: إدارة العمال
  - Worker Attendance: حضور العمال
  - Daily Expenses: المصاريف اليومية
  - Material Purchase: مشتريات المواد
  - Reports: التقارير

### الخادم الخلفي
- **API Routes**: RESTful APIs مع validation
- **Authentication**: Express sessions
- **File Structure**:
  - `server/index.ts`: نقطة دخول الخادم
  - `server/routes.ts`: API endpoints
  - `server/storage.ts`: طبقة الوصول للبيانات
  - `server/db.ts`: إعداد قاعدة البيانات

## الميزات الحالية

### إدارة المشاريع
- إنشاء وتعديل وحذف المشاريع
- تتبع حالة المشروع (نشط، مكتمل، متوقف)
- إحصائيات مالية شاملة لكل مشروع

### إدارة العمال
- تسجيل العمال مع أنواعهم (معلم، عامل)
- تتبع الأجور اليومية
- نظام حضور متقدم
- إدارة حوالات الأهل

### الإدارة المالية
- تحويلات العهدة بأنواعها المختلفة
- تتبع المصاريف اليومية
- مشتريات المواد والأدوات
- مصاريف النقل
- إدارة حسابات الموردين

### التقارير والتصدير
- تقارير مالية شاملة
- تصدير البيانات إلى Excel
- طباعة التقارير كـ PDF

## تفضيلات المستخدم
- **اللغة**: العربية في جميع الردود والملاحظات (تم التحديث: 17 أغسطس 2025)
- **التوجه**: RTL support كامل
- **التصميم**: Material Design مع ألوان مناسبة للثقافة العربية
- **التواصل**: استخدام اللغة العربية في جميع التفاعلات والتوجيهات

## التغييرات الأخيرة
- **تاريخ**: 17 أغسطس 2025
- **الحالة**: ✅ نظام بطاقات الأدوات مع العمليات الكاملة مكتمل
- **المنجز في التحديث الأخير**:
  - ✅ إصلاح المشاكل التقنية الجذرية:
    - تصحيح ترتيب معاملات apiRequest من (method, url, data) إلى (url, method, data)
    - إصلاح مشكلة SelectItem مع القيم الفارغة بإضافة || ""
    - تعديل القيم الافتراضية للنماذج لتجنب الأخطاء
  - ✅ تطوير نظام بطاقات الأدوات الشامل:
    - بطاقات أدوات تفاعلية مع قائمة أعمال منسدلة
    - أزرار سريعة للعرض والتعديل في أسفل البطاقة
    - قائمة أعمال شاملة (عرض التفاصيل، تعديل، نقل، حذف)
    - نظام حذف آمن مع تأكيد المستخدم
  - ✅ تحسين تجربة المستخدم:
    - إزالة عبارة "ريال سعودي" من حقول الأسعار حسب طلب المستخدم
    - تمييز الحقول الإجبارية بنجمة حمراء (*) والاختيارية بـ "(اختياري)"
    - واجهة مستخدم متجاوبة مع أيقونات واضحة
    - رسائل تأكيد وتحذير بالعربية
- **المرحلة الحالية**: نظام إدارة الأدوات مكتمل بعمليات CRUD شاملة مع واجهة احترافية

## التحسينات المخطط لها
- تحسين واجهة المستخدم للهاتف المحمول
- إضافة المزيد من أنواع التقارير
- تحسين نظام الإشعارات
- إضافة ميزات النسخ الاحتياطي التلقائي

## ملاحظات التطوير
- استخدام Supabase PostgreSQL فقط (ممنوع استخدام قاعدة البيانات المحلية)
- جميع النصوص والرسائل بالعربية
- دعم RTL في جميع أجزاء التطبيق
- اتباع معايير Material Design